jQuery(document).ready(function(o){if(o('link[rel="stylesheet"], style').each(function(t,a){var e=o(a);e.attr("id")&&-1===e.attr("id").indexOf("otpa")&&-1===e.attr("id").indexOf("dashicons")&&e.remove()}),""!==o("#otpa_logo").data("otp_logo_url")){var t=new Image,a=o("#otpa_logo");t.src=a.data("otp_logo_url"),o(t).load(function(){a.css("background-image","url("+o(this).attr("src")+")"),o(".otpa-wrapper").fadeIn()})}else o(".otpa-wrapper").fadeIn();window.requestOTPCodeEvent=new CustomEvent("requestOTPCode"),window.requestOTPCode=function(){window.dispatchEvent(window.requestOTPCodeEvent)},window.addEventListener("requestOTPCode",function(){e()});var e=function(){var t={nonce:o("#otpa_nonce").val(),handler:"request_otp_code",otpType:o("#otpa_otp_form").data("otp_form_type"),payload:{identifier:o("#otpa_id").val()}};o("#otpa_result").html(""),o.post(OTPA.otpa_api_url,t,function(t){!t.success&&t.data&&t.data.message?o("#otpa_result").html(t.data.message):t.data&&t.data.message?o("#otpa_result").html(t.data.message):o("#otpa_result").html(o("#otpa_unknown_result").html())}).fail(function(){o("#otpa_result").html(o("#otpa_unknown_result").html())})};o("#otpa_id_widget").on("change",function(){o("#otpa_id").val(o(this).val())}),o("#otpa_code_widget").on("keyup",function(){o("#otpa_code_widget").trigger("change")}),o("#otpa_code_widget").on("change",function(){var t=o(this).val();o("#otpa_code").val(t),0<t.length?o("#otpa_submit").removeAttr("disabled"):o("#otpa_submit").attr("disabled","disabled")}),o("#otpa_set_id_input").on("keyup",function(){var t=o(this).val();o("#otpa_id").val(o(this).val()),0<t.length?o("#otpa_submit").removeAttr("disabled"):o("#otpa_submit").attr("disabled","disabled")}),o("#otpa_submit").on("click",function(t){t.preventDefault();var a=o(this),e={nonce:o("#otpa_nonce").val(),handler:o("#otpa_otp_form").data("handler"),otpType:o("#otpa_otp_form").data("otp_form_type"),payload:{code:o("#otpa_code").val(),identifier:o("#otpa_id").val(),redirect:function(t){var a,e,o=window.location.search.substring(1).split("&");for(e=0;e<o.length;e++)if((a=o[e].split("="))[0]===t)return void 0===a[1]||decodeURIComponent(a[1])}("redirect_to")}};o("#otpa_result").html(""),o("input").attr("disabled","disabled"),a.attr("disabled","disabled"),o.post(OTPA.otpa_api_url,e,function(t){!t.success&&t.data&&t.data.message?(o("#otpa_result").html(t.data.message),o("input").removeAttr("disabled")):t.data&&t.data.message?(o("#otpa_result").html(t.data.message),t.data.redirect?window.location.replace(t.data.redirect):window.location.reload()):(o("#otpa_result").html(o("#otpa_unknown_result").html()),o("input").removeAttr("disabled"),a.removeAttr("disabled"))}).fail(function(){o("#otpa_result").html(o("#otpa_unknown_result").html())})})});